---

---

<div
  id="serverStats"
  class="flex items-center justify-center gap-4 max-w-[600px] mx-auto mb-4 text-white/90 font-medium text-sm bg-white/10 backdrop-blur-md px-6 py-3 rounded-full border border-white/10"
>
  <div class="flex items-center gap-2">
    <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
    <span id="statsText">Fetching server stats...</span>
  </div>
</div>

<script>
  const statsTextEl = document.getElementById("statsText");
  let retryTimeout: number | null = null;

  async function updateServerStats() {
    if (!statsTextEl) return;

    try {
      const response = await fetch("https://multitheftauto.com/count/");
      if (!response.ok) throw new Error("Network response was not ok");

      const text = await response.text();
      const [players, servers] = text
        .split(",")
        .map((num) => parseInt(num.trim()));

      if (!players || !servers) throw new Error("Invalid data format");

      if (statsTextEl) {
        statsTextEl.textContent = `${new Intl.NumberFormat("en-US").format(players)} players online on ${new Intl.NumberFormat("en-US").format(servers)} public servers`;
      }
    } catch (error) {
      console.error("Error fetching server stats:", error);
      if (retryTimeout) clearTimeout(retryTimeout);
      retryTimeout = window.setTimeout(updateServerStats, 10000);
    }
  }

  // Initial update
  updateServerStats();

  // Update every 5 minutes
  setInterval(updateServerStats, 300000);
</script>
